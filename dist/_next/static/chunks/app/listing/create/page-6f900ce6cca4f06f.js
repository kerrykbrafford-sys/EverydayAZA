(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{1032:function(e,t,r){Promise.resolve().then(r.bind(r,266))},266:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(7437),a=r(2265),s=r(6463),l=r(4697);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r(1066).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var o=r(1976),d=r(6881);let c=["Electronics","Fashion","Home & Garden","Sports","Beauty","Toys","Vehicles","Property","Services","Jobs"],u=["New","Like New","Good","Fair","Poor"];function m(){let e=(0,s.useRouter)(),[t,r]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[f,j]=(0,a.useState)(""),[y,k]=(0,a.useState)(""),[v,N]=(0,a.useState)([]),[w,C]=(0,a.useState)(!1),S=e=>{N(t=>t.filter((t,r)=>r!==e))},P=async r=>{r.preventDefault(),C(!0);try{let{data:{user:r}}=await d.O.auth.getUser();if(!r){alert("Please login first"),e.push("/login");return}let{data:n,error:a}=await d.O.from("listings").insert({title:t,description:m,price:parseFloat(x),location:g,category:f,condition:y,user_id:r.id,images:v.length>0?v:["/images/product-1.jpg"]}).select().single();if(a)throw a;e.push("/listing/".concat(n.id))}catch(e){console.error("Error creating listing:",e),alert("Error creating listing. Please try again.")}finally{C(!1)}};return(0,n.jsx)("main",{className:"min-h-screen bg-brand-light pt-20",children:(0,n.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-16",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-card p-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"font-display text-3xl text-brand-dark mb-2",children:"Post a Listing"}),(0,n.jsx)("p",{className:"text-brand-dark/60",children:"Sell your items to buyers around the world"})]}),(0,n.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-brand-dark mb-2",children:"Title *"}),(0,n.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"What are you selling?",required:!0,className:"w-full px-4 py-3 bg-brand-light rounded-xl border-none focus:outline-none focus:ring-2 focus:ring-brand-dark/20"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-brand-dark mb-2",children:"Description *"}),(0,n.jsx)("textarea",{value:m,onChange:e=>h(e.target.value),placeholder:"Describe your item in detail...",rows:4,required:!0,className:"w-full px-4 py-3 bg-brand-light rounded-xl border-none focus:outline-none focus:ring-2 focus:ring-brand-dark/20 resize-none"})]}),(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-brand-dark mb-2",children:"Price (USD) *"}),(0,n.jsx)("input",{type:"number",value:x,onChange:e=>b(e.target.value),placeholder:"0.00",required:!0,min:"0",step:"0.01",className:"w-full px-4 py-3 bg-brand-light rounded-xl border-none focus:outline-none focus:ring-2 focus:ring-brand-dark/20"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-brand-dark mb-2",children:"Location *"}),(0,n.jsx)("input",{type:"text",value:g,onChange:e=>p(e.target.value),placeholder:"City, Country",required:!0,className:"w-full px-4 py-3 bg-brand-light rounded-xl border-none focus:outline-none focus:ring-2 focus:ring-brand-dark/20"})]})]}),(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-brand-dark mb-2",children:"Category *"}),(0,n.jsxs)("select",{value:f,onChange:e=>j(e.target.value),required:!0,className:"w-full px-4 py-3 bg-brand-light rounded-xl border-none focus:outline-none focus:ring-2 focus:ring-brand-dark/20",children:[(0,n.jsx)("option",{value:"",children:"Select category"}),c.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-brand-dark mb-2",children:"Condition *"}),(0,n.jsxs)("select",{value:y,onChange:e=>k(e.target.value),required:!0,className:"w-full px-4 py-3 bg-brand-light rounded-xl border-none focus:outline-none focus:ring-2 focus:ring-brand-dark/20",children:[(0,n.jsx)("option",{value:"",children:"Select condition"}),u.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-brand-dark mb-2",children:"Images (up to 5)"}),(0,n.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[v.map((e,t)=>(0,n.jsxs)("div",{className:"relative aspect-square",children:[(0,n.jsx)("img",{src:e,alt:"Upload ".concat(t+1),className:"w-full h-full object-cover rounded-xl"}),(0,n.jsx)("button",{type:"button",onClick:()=>S(t),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center",children:(0,n.jsx)(l.Z,{className:"w-4 h-4"})})]},t)),v.length<5&&(0,n.jsxs)("label",{className:"aspect-square flex flex-col items-center justify-center bg-brand-light rounded-xl cursor-pointer hover:bg-brand-dark/5 transition-colors border-2 border-dashed border-brand-dark/20",children:[(0,n.jsx)(i,{className:"w-8 h-8 text-brand-dark/40 mb-2"}),(0,n.jsx)("span",{className:"text-xs text-brand-dark/60",children:"Add Photo"}),(0,n.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let t=e.target.files;if(!t)return;let r=Array.from(t).map(e=>URL.createObjectURL(e));N(e=>[...e,...r].slice(0,5))},className:"hidden"})]})]})]}),(0,n.jsxs)("button",{type:"submit",disabled:w,className:"w-full py-4 bg-brand-dark text-white rounded-xl font-medium hover:bg-brand-dark/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[w?"Creating...":"Post Listing",!w&&(0,n.jsx)(o.Z,{className:"w-5 h-5"})]})]})]})})})}},6881:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});let n=(0,r(7327).eI)("https://your-project.supabase.co","your-anon-key")},1066:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let r=(0,n.forwardRef)((r,l)=>{let{color:i="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:u="",children:m,...h}=r;return(0,n.createElement)("svg",{ref:l,...a,width:o,height:o,stroke:i,strokeWidth:c?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat(s(e)),u].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},1976:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(1066).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},4697:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(1066).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[327,971,23,744],function(){return e(e.s=1032)}),_N_E=e.O()}]);