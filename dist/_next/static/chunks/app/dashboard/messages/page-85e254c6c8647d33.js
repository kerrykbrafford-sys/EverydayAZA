(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{3018:function(e,s,a){Promise.resolve().then(a.bind(a,7902))},7902:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var t=a(7437),n=a(2265),r=a(7138),d=a(5137),l=a(1066);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,l.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var c=a(2022);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var x=a(6881);function h(e){let{conversationId:s,currentUserId:a}=e,[r,d]=(0,n.useState)([]),[l,i]=(0,n.useState)(""),c=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{let{data:e}=await x.O.from("messages").select("*").eq("conversation_id",s).order("created_at",{ascending:!0});e&&d(e)})();let e=x.O.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:"conversation_id=eq.".concat(s)},e=>{d(s=>[...s,e.new])}).subscribe();return()=>{e.unsubscribe()}},[s]),(0,n.useEffect)(()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[r]);let h=async()=>{l.trim()&&(await x.O.from("messages").insert({conversation_id:s,sender_id:a,content:l.trim()}),i(""))};return(0,t.jsxs)("div",{className:"flex flex-col h-[500px] bg-white rounded-2xl shadow-card overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map(e=>(0,t.jsx)("div",{className:"flex ".concat(e.sender_id===a?"justify-end":"justify-start"),children:(0,t.jsxs)("div",{className:"max-w-[70%] px-4 py-3 rounded-2xl ".concat(e.sender_id===a?"bg-brand-dark text-white rounded-br-none":"bg-brand-light text-brand-dark rounded-bl-none"),children:[(0,t.jsx)("p",{children:e.content}),(0,t.jsx)("span",{className:"text-xs opacity-60 mt-1 block",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)),(0,t.jsx)("div",{ref:c})]}),(0,t.jsx)("div",{className:"p-4 border-t border-brand-dark/10",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),onKeyPress:e=>"Enter"===e.key&&h(),placeholder:"Type a message...",className:"flex-1 px-4 py-3 bg-brand-light rounded-full border-none focus:outline-none focus:ring-2 focus:ring-brand-dark/20"}),(0,t.jsx)("button",{onClick:h,className:"w-12 h-12 bg-brand-dark text-white rounded-full flex items-center justify-center hover:bg-brand-dark/90 transition-colors",children:(0,t.jsx)(o,{className:"w-5 h-5"})})]})})]})}let u=[{id:"1",name:"John Doe",lastMessage:"Is this item still available?",time:"2 min ago",unread:2},{id:"2",name:"Sarah Smith",lastMessage:"Thanks for the quick response!",time:"1 hour ago",unread:0},{id:"3",name:"Mike Johnson",lastMessage:"Can you ship to Ghana?",time:"3 hours ago",unread:1}];function m(){let[e,s]=(0,n.useState)(u[0]);return(0,t.jsx)("main",{className:"min-h-screen bg-brand-light pt-20",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)(r.default,{href:"/dashboard",className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center hover:bg-brand-dark/5 transition-colors",children:(0,t.jsx)(d.Z,{className:"w-5 h-5 text-brand-dark"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"font-display text-3xl text-brand-dark",children:"Messages"}),(0,t.jsx)("p",{className:"text-brand-dark/60",children:"Chat with buyers and sellers"})]})]}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6 h-[600px]",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 border-b border-brand-dark/10",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-brand-dark/40"}),(0,t.jsx)("input",{type:"text",placeholder:"Search conversations...",className:"w-full pl-12 pr-4 py-3 bg-brand-light rounded-xl border-none focus:outline-none focus:ring-2 focus:ring-brand-dark/20"})]})}),(0,t.jsx)("div",{className:"overflow-y-auto h-[calc(600px-85px)]",children:u.map(a=>(0,t.jsxs)("button",{onClick:()=>s(a),className:"w-full p-4 flex items-center gap-4 hover:bg-brand-light transition-colors ".concat((null==e?void 0:e.id)===a.id?"bg-brand-light":""),children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-brand-dark rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(c.Z,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium text-brand-dark",children:a.name}),(0,t.jsx)("span",{className:"text-xs text-brand-dark/40",children:a.time})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,t.jsx)("span",{className:"text-sm text-brand-dark/60 truncate max-w-[150px]",children:a.lastMessage}),a.unread>0&&(0,t.jsx)("span",{className:"w-5 h-5 bg-brand-gold rounded-full flex items-center justify-center text-xs text-brand-dark font-medium",children:a.unread})]})]})]},a.id))})]}),(0,t.jsx)("div",{className:"lg:col-span-2",children:e?(0,t.jsxs)("div",{className:"h-full",children:[(0,t.jsxs)("div",{className:"bg-white rounded-t-2xl shadow-card p-4 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-brand-dark rounded-full flex items-center justify-center",children:(0,t.jsx)(c.Z,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-brand-dark",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-green-600",children:"Online"})]})]}),(0,t.jsx)(h,{conversationId:e.id,currentUserId:"current-user"})]}):(0,t.jsx)("div",{className:"h-full bg-white rounded-2xl shadow-card flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-brand-dark/40",children:"Select a conversation to start chatting"})})})]})]})})}},6881:function(e,s,a){"use strict";a.d(s,{O:function(){return t}});let t=(0,a(7327).eI)("https://your-project.supabase.co","your-anon-key")},5137:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2022:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(1066).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[233,327,971,23,744],function(){return e(e.s=3018)}),_N_E=e.O()}]);